from collections import Counter

class Solution:
    def threeSumMulti(self, A, target):
        """
        :type A: List[int]
        :type target: int
        :rtype: int
        """
        cnt = Counter(A)
        A = sorted(A)
        result = []
        for i in range(len(A)-2):
            if i>0 and A[i] == A[i - 1]:
                continue

            l, r = i + 1, len(A) - 1
            while l < r:
                if (A[l] + A[r]) > (target - A[i]):
                    r -= 1
                    while A[r] == A[r + 1] and l < r:
                        r -= 1

                elif (A[l] + A[r]) < (target - A[i]):
                    l += 1
                    while A[l] == A[l - 1] and l < r:
                        l += 1
                else:
                    result.append((A[i], A[l], A[r]))
                    l += 1
                    while A[l] == A[l - 1] and l < r:
                        l += 1

        c = 0
        print(result)
        for r in result:
            r_cnt = Counter(r)
            t = 1
            for k, v in r_cnt.most_common():
                if v == 3:
                    t *= cnt[k]*(cnt[k]-1)*(cnt[k]-2) / 6
                elif v == 2:
                    t *= (cnt[k]*(cnt[k]-1)) / 2
                else:
                    t *= cnt[k]
                print(t)

            c += t

        return c % 100000000


if __name__ == '__main__':
    s = Solution()
    a = [1,1,2,2,3,3,4,4,5,5]
    a = [1, 1, 2, 2, 2, 2]
    a = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0..
    print(s.threeSumMulti(a, 5))